<div class="container">
    <div class="row">
        <div class="col-md-6 col-6">
            <button class="btn  btn-block {{#ifCond package '1' }}btn-danger{{else}} btn-outline-primary{{/ifCond}}"
                {{#ifCond package '1' }}disabled{{/ifCond}} id="singleAssetDetail" style="height:150px;">查看資產詳情</button>
        </div>
        <div class="col-md-6 col-6">
            <button class="btn {{#ifCond package '0' }}btn-danger{{else}} btn-outline-primary{{/ifCond}} btn-block"
                {{#ifCond package '0' }}disabled{{/ifCond}} id="multipleAssetDetail" data-id="{{gatepassId}}"
                style="height:150px;" data-toggle="modal" data-target="#multipleAssetDetail-Modal">查看多個資產內容</button>
        </div>
    </div>
    <div class="row mt-3">
        <div class="col-md-6 col-6">
            <button class="btn {{#ifCond package '1' }}btn-danger{{else}} btn-outline-primary{{/ifCond}} btn-block"
                {{#ifCond package '1' }}disabled{{/ifCond}} id="singleAsset" style="height:150px;">單個資產到貨</button>
        </div>
        <div class="col-md-6 col-6">
            <button class="btn {{#ifCond package '0' }}btn-danger{{else}} btn-outline-primary{{/ifCond}} btn-block"
                {{#ifCond package '0' }}disabled{{/ifCond}} id="multipleAsset" style="height:150px;">多個資產到貨</button>
        </div>
    </div>
    <div class="row mt-3">
        <div class="col-md-6 col-6">
            <button class="btn {{#ifCond package '1' }}btn-danger{{else}} btn-outline-primary{{/ifCond}} btn-block"
                {{#ifCond package '1' }}disabled{{/ifCond}} id="modifyAsset" style="height:150px;">修改資產使用情況</button>
        </div>
        <div class="col-md-6 col-6">
            <button class="btn {{#ifCond package '1' }}btn-danger{{else}} btn-outline-primary{{/ifCond}} btn-block"
                {{#ifCond package '1' }}disabled{{/ifCond}} id="checkAsset" style="height:150px;">資產盤點</button>
        </div>
    </div>





    {{!-- 多個資產查詢 Modal --}}
    <div class="modal" tabindex="-1" role="dialog" id="multipleAssetDetail-Modal">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">當前 Gatepass 內容</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" id="multipleAssetDetail-Modal-body">
                    {{!-- 這邊放當前 gatepass 物品清單 --}}
                </div>
                <div class="modal-footer">

                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    const singleAssetDetail = document.querySelector('#singleAssetDetail')
    const multipleAssetDetail = document.querySelector('#multipleAssetDetail')
    const singleAsset = document.querySelector('#singleAsset')
    const multipleAsset = document.querySelector('#multipleAsset')
    const modifyAsset = document.querySelector('#modifyAsset')
    const checkAsset = document.querySelector('#checkAsset')


    singleAssetDetail.addEventListener('click', () => {
        console.log('請求單個資產詳情')
    })

    multipleAssetDetail.addEventListener('click', () => {
        console.log('請求多個資產詳情')
        const gatepassId = multipleAssetDetail.getAttribute('data-id')

        // 發送請求到後端查詢該筆 gatepass 的 Assets 資料, 回來渲染給 Modal 進行展示
        axios.post('/api/gatepass/package', { gatepassId })
            .then(reply => {
                console.log(reply.data.response)
                if (reply.data.status === 200) {
                    const multipleAssetDetail_Modal_body = document.querySelector('#multipleAssetDetail-Modal-body')
                    let rawHtml = `
                    <div class='row'>
                            <div class='col-md-4'>圖片</div>
                            <div class='col-md-4'>名稱</div>
                            <div class='col-md-4'>數量</div>
                    </div>
                    `
                    reply.data.response.forEach(asset => {

                        rawHtml += `
                        <div class='row mt-1'>
                            <div class='col-md-4'><img src='${asset.image}' style='width:80px;height:80px;'></div>
                            <div class='col-md-4'>${asset.name}</div>
                            <div class='col-md-4'>${asset.Quantity}</div>
                        </div>
                        `
                    })
                    multipleAssetDetail_Modal_body.innerHTML = rawHtml
                } else {
                    console.log('失敗請求...')
                }
            }).catch(err => {
                console.log(err)
            })
    })

    singleAsset.addEventListener('click', () => {
        console.log('單個資產到貨')
    })

    multipleAsset.addEventListener('click', () => {
        console.log('整包資產到貨')

    })

    modifyAsset.addEventListener('click', () => {
        console.log('修改資產使用情況')
    })

    checkAsset.addEventListener('click', () => {
        console.log('資產盤點')
    })
</script>